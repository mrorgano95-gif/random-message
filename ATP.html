<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>سلسلة نقل الإلكترونات - ATP متقدمة</title>
<style>
  body {
    margin: 0;
    background-color: #1a1a1a;
    color: #fff;
    font-family: Arial, sans-serif;
    overflow-x: hidden;
  }
  #info {
    text-align: center;
    font-size: 20px;
    padding: 20px;
    min-height: 40px;
  }
  #container {
    position: relative;
    width: 100%;
    height: 600px;
  }
  svg {
    width: 100%;
    height: 100%;
  }
  .complex {
    stroke: #666;
    stroke-width: 2;
    fill: #444;
    rx: 15;
    ry: 15;
  }
  .complex-text {
    fill: #fff;
    font-size: 14px;
    text-anchor: middle;
  }
  .electron {
    fill: #00f;
    r: 6;
  }
  .proton {
    fill: #f00;
    r: 5;
  }
  .ATP {
    fill: #ff0;
    font-size: 16px;
    font-weight: bold;
  }
  #controls {
    text-align: center;
    margin-top: 10px;
  }
  button {
    font-size: 18px;
    padding: 10px 20px;
    margin: 0 10px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
  }
  #prev { background-color: #d9534f; color: #fff; }
  #next { background-color: #5cb85c; color: #fff; }
</style>
</head>
<body>

<div id="info">اضغط التالي للبدء</div>
<div id="container">
<svg id="mitoSvg">
  <!-- Complexes -->
  <rect x="100" y="200" width="80" height="150" class="complex" id="complexI"/>
  <text x="140" y="380" class="complex-text">Complex I</text>
  
  <rect x="220" y="250" width="60" height="100" class="complex" id="complexII"/>
  <text x="250" y="380" class="complex-text">Complex II</text>
  
  <rect x="320" y="200" width="80" height="150" class="complex" id="complexIII"/>
  <text x="360" y="380" class="complex-text">Complex III</text>
  
  <rect x="450" y="220" width="80" height="130" class="complex" id="complexIV"/>
  <text x="490" y="380" class="complex-text">Complex IV</text>
  
  <rect x="600" y="180" width="100" height="200" class="complex" id="ATPase"/>
  <text x="650" y="400" class="complex-text">ATP Synthase</text>
  
  <!-- Multiple electrons -->
  <circle class="electron" id="e1" cx="60" cy="275"></circle>
  <circle class="electron" id="e2" cx="60" cy="295"></circle>
  <circle class="electron" id="e3" cx="60" cy="315"></circle>
  
  <!-- Multiple protons -->
  <circle class="proton" id="p1" cx="140" cy="200"></circle>
  <circle class="proton" id="p2" cx="150" cy="210"></circle>
  <circle class="proton" id="p3" cx="160" cy="220"></circle>
</svg>
</div>

<div id="controls">
  <button id="prev">السابق</button>
  <button id="next">التالي</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
<script>
// خطوات العملية
const steps = [
  {info:"اتحداك أن ترى NADH يسلم إلكتروناته للـ Complex I.", electrons:[{id:'e1', cx:140, cy:275},{id:'e2', cx:140, cy:295},{id:'e3', cx:140, cy:315}], protons:[{id:'p1', cx:140, cy:200},{id:'p2', cx:150, cy:210},{id:'p3', cx:160, cy:220}]},
  {info:"اتحداك أن تنتقل الإلكترونات إلى Complex II.", electrons:[{id:'e1', cx:250, cy:300},{id:'e2', cx:250, cy:320},{id:'e3', cx:250, cy:340}], protons:[{id:'p1', cx:250, cy:250},{id:'p2', cx:260, cy:260},{id:'p3', cx:270, cy:270}]},
  {info:"اتحداك أن تصل الإلكترونات إلى Complex III.", electrons:[{id:'e1', cx:360, cy:275},{id:'e2', cx:360, cy:295},{id:'e3', cx:360, cy:315}], protons:[{id:'p1', cx:360, cy:220},{id:'p2', cx:370, cy:230},{id:'p3', cx:380, cy:240}]},
  {info:"اتحداك أن تصل الإلكترونات إلى Complex IV.", electrons:[{id:'e1', cx:490, cy:275},{id:'e2', cx:490, cy:295},{id:'e3', cx:490, cy:315}], protons:[{id:'p1', cx:490, cy:240},{id:'p2', cx:500, cy:250},{id:'p3', cx:510, cy:260}]},
  {info:"اتحداك أن ترى البروتونات تدور عبر ATP Synthase لإنتاج ATP.", electrons:[{id:'e1', cx:650, cy:275},{id:'e2', cx:650, cy:295},{id:'e3', cx:650, cy:315}], protons:[{id:'p1', cx:650, cy:180},{id:'p2', cx:660, cy:190},{id:'p3', cx:670, cy:200}], rotate:true, ATP:true}
];

let currentStep = -1;

function updateStep(step){
  const s = steps[step];
  document.getElementById('info').innerText = s.info;
  
  // الإلكترونات
  s.electrons.forEach(e=>{
    anime({
      targets: document.getElementById(e.id),
      cx: e.cx,
      cy: e.cy,
      duration:1500,
      easing:'linear'
    });
  });
  
  // البروتونات
  s.protons.forEach(p=>{
    anime({
      targets: document.getElementById(p.id),
      cx: p.cx,
      cy: p.cy,
      duration:1500,
      easing:'linear'
    });
  });
  
  // دوران ATP و إنتاج ATP
  if(s.rotate){
    anime({
      targets: '#ATPase',
      rotate:'1turn',
      duration:1500,
      easing:'easeInOutSine'
    });
    // إنتاج ATP نصوص متحركة
    for(let i=0;i<3;i++){
      let atp = document.createElementNS("http://www.w3.org/2000/svg","text");
      atp.setAttribute('x',650+i*15);
      atp.setAttribute('y',160);
      atp.setAttribute('class','ATP');
      atp.innerHTML="ATP";
      document.getElementById('mitoSvg').appendChild(atp);
      anime({
        targets: atp,
        translateY:[0,-50],
        opacity:[1,0],
        duration:2000+i*200,
        easing:'easeOutQuad',
        complete:()=>atp.remove()
      });
    }
  }
}

document.getElementById('next').addEventListener('click',()=>{
  if(currentStep < steps.length-1){
    currentStep++;
    updateStep(currentStep);
  }
});
document.getElementById('prev').addEventListener('click',()=>{
  if(currentStep > 0){
    currentStep--;
    updateStep(currentStep);
  }
});
</script>
</body>
</html>
